# ═══════════════════════════════════════════════════════════════════════════════
#  NEXUS-PRIME: GitHub Settings Configuration
#  Default settings for GitHub Master Team
# ═══════════════════════════════════════════════════════════════════════════════

# Environment Variables
environment:
  GITHUB_TOKEN: "${GITHUB_TOKEN}"
  GITHUB_OWNER: "${GITHUB_OWNER}"
  GITHUB_REPO: "${GITHUB_REPO}"
  GH_HOST: "github.com"

# Default Repository Settings
repository:
  visibility: "private"
  default_branch: "main"
  allow_squash_merge: true
  allow_merge_commit: true
  allow_rebase_merge: true
  delete_branch_on_merge: true
  allow_auto_merge: false
  allow_update_branch: true

# Branch Protection Defaults
branch_protection:
  main:
    required_pull_request_reviews:
      required_approving_review_count: 1
      dismiss_stale_reviews: true
      require_code_owner_reviews: true
    required_status_checks:
      strict: true
      contexts:
        - "ci"
    enforce_admins: false
    restrictions: null
    allow_force_pushes: false
    allow_deletions: false

  develop:
    required_pull_request_reviews:
      required_approving_review_count: 1
    required_status_checks:
      strict: false
      contexts:
        - "ci"

# Label Presets
labels:
  # Type labels
  - name: "bug"
    color: "d73a4a"
    description: "Something isn't working"
  - name: "feature"
    color: "0075ca"
    description: "New feature request"
  - name: "enhancement"
    color: "a2eeef"
    description: "Improvement to existing feature"
  - name: "documentation"
    color: "0052cc"
    description: "Documentation updates"
  - name: "security"
    color: "ee0701"
    description: "Security related issue"
  - name: "performance"
    color: "fbca04"
    description: "Performance improvement"
  - name: "refactor"
    color: "d4c5f9"
    description: "Code refactoring"
  - name: "dependencies"
    color: "0366d6"
    description: "Dependency updates"

  # Priority labels
  - name: "priority: critical"
    color: "b60205"
    description: "Critical priority"
  - name: "priority: high"
    color: "d93f0b"
    description: "High priority"
  - name: "priority: medium"
    color: "fbca04"
    description: "Medium priority"
  - name: "priority: low"
    color: "0e8a16"
    description: "Low priority"

  # Status labels
  - name: "status: triage"
    color: "ededed"
    description: "Needs triage"
  - name: "status: in progress"
    color: "0052cc"
    description: "Work in progress"
  - name: "status: blocked"
    color: "b60205"
    description: "Blocked by dependency"
  - name: "status: needs review"
    color: "fbca04"
    description: "Needs code review"
  - name: "status: ready"
    color: "0e8a16"
    description: "Ready for merge"

  # Size labels
  - name: "size: XS"
    color: "009900"
    description: "Extra small (< 10 lines)"
  - name: "size: S"
    color: "77bb00"
    description: "Small (10-50 lines)"
  - name: "size: M"
    color: "ffbb00"
    description: "Medium (50-200 lines)"
  - name: "size: L"
    color: "ff8800"
    description: "Large (200-500 lines)"
  - name: "size: XL"
    color: "ff4400"
    description: "Extra large (> 500 lines)"

# Dependabot Configuration
dependabot:
  version: 2
  updates:
    - package_ecosystem: "npm"
      directory: "/"
      schedule:
        interval: "weekly"
      open_pull_requests_limit: 10
      reviewers:
        - "@org/developers"
      labels:
        - "dependencies"
        - "automated"

    - package_ecosystem: "github-actions"
      directory: "/"
      schedule:
        interval: "weekly"
      labels:
        - "dependencies"
        - "github-actions"

# Security Settings
security:
  enable_vulnerability_alerts: true
  enable_automated_security_fixes: true
  enable_secret_scanning: true
  enable_push_protection: true
  enable_code_scanning: true

# GitHub Actions Settings
actions:
  default_workflow_permissions: "read"
  can_approve_pull_request_reviews: false
  allowed_actions: "all"

# Commit Settings
commits:
  enforce_conventional_commits: true
  allowed_types:
    - feat
    - fix
    - docs
    - style
    - refactor
    - test
    - chore
    - perf
    - ci
    - build
    - revert

# Merge Settings
merge:
  default_method: "squash"
  allow_merge_commit: true
  allow_squash_merge: true
  allow_rebase_merge: true
  delete_branch_on_merge: true

# Hooks Configuration
hooks:
  pre_commit:
    - lint_staged
    - type_check
    - secret_scan
  commit_msg:
    - conventional_commits
  pre_push:
    - test
    - build
  post_merge:
    - dependency_update

# CLI Aliases
aliases:
  pr: "github-pr"
  issue: "github-issue"
  actions: "github-actions"
  release: "github-release"
  security: "github-security"
